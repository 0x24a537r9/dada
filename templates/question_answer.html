{% extends 'base_question_answer.html' %}

{% block title %}Question &amp; Answer{% endblock %}

{% block content %}
{{ super() }}
<span id="question-q">Q:</span><span id="question" class="poem-text"></span>
<br>
<span id="answer-a">A:</span><span id="answer" class="poem-text"></span>
<br>
<button id="upvote-button" href="create">Upvote</button>
<button id="downvote-button" href="create">Downvote</button>
<br>
<a id="create-poem-button" href="create">Create poem</a>
<br>
<span id="error"></span>
{% endblock %}

{% block footer_script %}
{{ super() }}
<script>
  var entries = [],
      $question = $('#question'),
      $answer = $('#answer'),
      $upvoteButton = $('#upvote-button'),
      $downvoteButton = $('#downvote-button'),
      $voteButtons = $('#upvote-button, #downvote-button'),
      $error = $('#error');

  $(function () {
    $upvoteButton.click(function() {
      vote(entries, 1, $voteButtons, $error, loadNext);
    });
    $downvoteButton.click(function() {
      vote(entries, -1, $voteButtons, $error, loadNext);
    });
    loadNext();
  });

  function loadNext() {
    loadQuestionAnswer($question, $answer, $voteButtons, $error, function(data) {
      entries = data;
    });
  }
</script>
{% endblock %}